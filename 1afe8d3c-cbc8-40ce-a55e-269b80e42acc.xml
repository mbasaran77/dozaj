<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>r_edge_1(Clk:=execute);&#xD;
&#xD;
IF r_edge_1.Q AND state = 5  THEN&#xD;
	state := 1;&#xD;
	bosaltma_ok := FALSE;&#xD;
	Done := FALSE;&#xD;
END_IF;&#xD;
&#xD;
IF execute THEN&#xD;
&#xD;
	CASE state OF&#xD;
		1 : 	&#xD;
			klape_genel:= TRUE;&#xD;
			klape_cuval :=cuvala_bosalt;&#xD;
			klape_mikser:= miksere_bosalt;&#xD;
	 		// fb_eks_kont(excute:=execute, tartim:=tarti, miktar:=miktar, period:=period, eksilme_yetersiz=&gt;yetersiz_bosaltma);&#xD;
			IF yetersiz_bosaltma THEN&#xD;
				vib_on :=TRUE;&#xD;
			END_IF;	&#xD;
			alarm := yetersiz_bosaltma;&#xD;
			IF tarti&lt;=0.2 AND tarti&gt;=-0.2 THEN&#xD;
				malzeme_bitti:=TRUE;&#xD;
				state := 2;&#xD;
			END_IF;&#xD;
		2: //patlaç valf&#xD;
			patlac_valf := TRUE;&#xD;
			patlac_timer(In:=TRUE, PT:=T#15s);&#xD;
			IF patlac_timer.Q THEN&#xD;
				state := 3;&#xD;
				patlac_valf := FALSE;&#xD;
			END_IF;&#xD;
		3: // vibratör &#xD;
			vib_on_1 := TRUE;&#xD;
			timer_vib_1(In:=TRUE, PT:=T#15s);&#xD;
			IF timer_vib_1.Q THEN&#xD;
				state	 := 4 ;&#xD;
				vib_on_1 := FALSE;&#xD;
			END_IF;&#xD;
		4 :&#xD;
			klape_genel := FALSE ;&#xD;
			klape_cuval := FALSE;&#xD;
			klape_mikser := FALSE;&#xD;
			yetersiz_bosaltma := FALSE;&#xD;
			vib_on := FALSE ;&#xD;
			vib_on_1 := FALSE ;&#xD;
			malzeme_bitti := FALSE;&#xD;
			patlac_valf := FALSE;&#xD;
			state := 5;&#xD;
		5 :&#xD;
			Done := TRUE;&#xD;
			&#xD;
	END_CASE;&#xD;
&#xD;
ELSE&#xD;
		klape_genel := FALSE ;&#xD;
		klape_cuval := FALSE;&#xD;
		klape_mikser := FALSE;&#xD;
		yetersiz_bosaltma := FALSE;&#xD;
		vib_on := FALSE ;&#xD;
		vib_on_1 := FALSE ;&#xD;
		malzeme_bitti := FALSE;&#xD;
		patlac_valf := FALSE;&#xD;
END_IF;&#xD;
&#xD;
//xx sn sonra vib of olsun&#xD;
timer_vib(In:=vib_on, PT:=T#10s);&#xD;
IF timer_vib.Q THEN&#xD;
	vib_on := FALSE;&#xD;
END_IF;&#xD;
&#xD;
vibrator := vib_on OR vib_on_1;</Text></StructuredTextModel>