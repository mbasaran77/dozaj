<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>r_edge_1(clk:=start);&#xD;
IF state=2 and r_edge_1.Q  THEN&#xD;
	state:=0;&#xD;
	fonk_end:=FALSE;&#xD;
END_IF;&#xD;
&#xD;
(*sikolan gönderme kısmı*)&#xD;
IF start AND state=0 THEN&#xD;
	vana_siklon:=TRUE;&#xD;
	vana_tarti:=TRUE;&#xD;
	ton_01(In:=vana_siklon,PT:=T#1s,Q=&gt;on_ton_01);&#xD;
	IF on_ton_01 THEN&#xD;
		rotary:=TRUE;&#xD;
		blower:=TRUE;&#xD;
		kontrol_tart:=TRUE;&#xD;
	END_IF;&#xD;
	//eksilme kontrolü vib  çalıştrma&#xD;
	fb_ek_kont(excute:=start, tartim:=bb_tarti, miktar:=eksilme_mik, period:=T#60s, eksilme_yetersiz=&gt;alarm_eksilme);&#xD;
	r_edge_2(Clk:=alarm_eksilme);&#xD;
	IF r_edge_2.Q THEN&#xD;
		vib_motor:=TRUE;&#xD;
		eksilme_yok := TRUE;&#xD;
	END_IF;&#xD;
&#xD;
	IF bb_tarti&lt;=0.2 AND bb_tarti&gt;=-0.2 THEN&#xD;
		malzeme_bitti:=TRUE;&#xD;
		(*burada süre eklendi, belki siklon kilo ile karşılaştırma yapılmalı*)&#xD;
	END_IF;&#xD;
	malzeme_timer(In:=malzeme_bitti,PT:=malzeme_time,Q=&gt;m_timer_on);&#xD;
	IF m_timer_on THEN&#xD;
		state:=1;&#xD;
		vana_siklon:=FALSE;&#xD;
		vana_tarti:=FALSE;&#xD;
		rotary:=FALSE;&#xD;
		blower:=FALSE;&#xD;
		kontrol_tart:=FALSE;&#xD;
		vib_motor:=FALSE;&#xD;
		eksilme_yok:=FALSE;&#xD;
		timer_str:=FALSE;&#xD;
		kontrol_tart:=FALSE;&#xD;
		fan:=FALSE;&#xD;
		patlac:=FALSE;&#xD;
		fan_t_strt:=FALSE;&#xD;
		patlac_str:=FALSE;&#xD;
		malzeme_bitti:=FALSE;&#xD;
	END_IF;		&#xD;
END_IF;&#xD;
&#xD;
IF start AND state=1 THEN&#xD;
	fonk_end:=TRUE;&#xD;
	reset_all := TRUE ;&#xD;
	state:=2;&#xD;
END_IF;&#xD;
&#xD;
// eksilme yok geldikten sonra timer kadar çalışı stop etme bölüm&#xD;
vib_timer(In:=eksilme_yok,PT:=vib_time,Q=&gt;vibStop);&#xD;
&#xD;
IF vibStop THEN&#xD;
	eksilme_yok:=FALSE;&#xD;
	vib_motor:=FALSE;&#xD;
	vibStop := FALSE;&#xD;
END_IF;&#xD;
&#xD;
IF reset_all = FALSE or start = FALSE THEN&#xD;
		vana_siklon:=FALSE;&#xD;
		vana_tarti:=FALSE;&#xD;
		rotary:=FALSE;&#xD;
		blower:=FALSE;&#xD;
		kontrol_tart:=FALSE;&#xD;
		vib_motor:=FALSE;&#xD;
		eksilme_yok:=FALSE;&#xD;
		timer_str:=FALSE;&#xD;
		kontrol_tart:=FALSE;&#xD;
		fan:=FALSE;&#xD;
		patlac:=FALSE;&#xD;
		fan_t_strt:=FALSE;&#xD;
		patlac_str:=FALSE;&#xD;
		malzeme_bitti:=FALSE;	&#xD;
END_IF;&#xD;
&#xD;
(*siklon fan ve patlaç çalışması*)&#xD;
(*fan ve patlaç çalışma tartıya göre yapılacak&#xD;
IF fan_tart_timer_on THEN&#xD;
	IF siklon_tarti&gt;tartim_2+artan_miktar THEN&#xD;
		patlac_str:=TRUE;&#xD;
		fan_t_strt:=FALSE;		&#xD;
	END_IF;&#xD;
END_IF;&#xD;
&#xD;
fan_tart_timer(In:=fan_t_strt,PT:=T#60s,Q=&gt;fan_tart_timer_on);&#xD;
&#xD;
IF kontrol_tart AND fan_t_strt =FALSE THEN&#xD;
	tartim_2:=siklon_tarti;&#xD;
	fan_t_strt:=TRUE;&#xD;
	fan:=TRUE;&#xD;
END_IF;&#xD;
&#xD;
&#xD;
&#xD;
IF patlac_str THEN&#xD;
	fan:=FALSE;&#xD;
	patlac:=TRUE;&#xD;
END_IF;&#xD;
&#xD;
patlac_timer(In:=patlac_str,PT:=patlac_time,Q=&gt;patlac_of);&#xD;
&#xD;
IF patlac_of THEN&#xD;
	fan:=TRUE;&#xD;
	patlac:=FALSE;&#xD;
	patlac_str:=FALSE;&#xD;
END_IF;*)</Text></StructuredTextModel>