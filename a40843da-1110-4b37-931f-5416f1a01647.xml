<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>&#xD;
my_r_trig_0(Clk:=çalış, Q=&gt;calis_r);&#xD;
&#xD;
IF calis_r AND  calis_kilit=FALSE THEN&#xD;
	gercek_kg_off  := gerçek_kg; &#xD;
	calis_kilit := TRUE;&#xD;
END_IF;&#xD;
&#xD;
IF recete_iptal THEN&#xD;
	calis_kilit := FALSE ;&#xD;
	tartım_tamam := FALSE;&#xD;
END_IF;&#xD;
&#xD;
tartım_kg := gerçek_kg - gercek_kg_off ;&#xD;
&#xD;
IF çalış THEN&#xD;
&#xD;
	motorlar:=TRUE;&#xD;
&#xD;
	IF tartım_kg &gt;= tank_hedef_kg THEN&#xD;
		tartım_tamam := TRUE ;&#xD;
		motorlar:=FALSE;&#xD;
		calis_kilit := FALSE;&#xD;
	END_IF;&#xD;
	&#xD;
	(**** stok düşme ****)&#xD;
	b_stok_arr[tankNo]:=b_stok_arr[tankNo]-(gerçek_kg-gercek_kg_off);&#xD;
	b_stok_arr_ekr[tankNo]:=b_stok_arr[tankNo];&#xD;
	&#xD;
	(**** sürücü frekansı ****)&#xD;
	IF (tartım_kg/tank_hedef_kg)&lt;0.5 THEN&#xD;
		sürücü_fr:=5000;&#xD;
	END_IF;&#xD;
&#xD;
	IF (tartım_kg/tank_hedef_kg)&gt;0.5 THEN&#xD;
		sürücü_fr:=REAL_TO_INT((1-(tartım_kg/tank_hedef_kg))*10000);&#xD;
		IF sürücü_fr&gt;=5000 THEN&#xD;
			sürücü_fr :=5000;&#xD;
		END_IF;&#xD;
	END_IF;&#xD;
	&#xD;
	IF(tartım_kg/tank_hedef_kg)&gt;=1.0 THEN&#xD;
		sürücü_fr:=0;&#xD;
	END_IF;&#xD;
	&#xD;
	fark:=(1-(tartım_kg/tank_hedef_kg))*100;&#xD;
	b_tartim_hata[tankNo]:=fark;&#xD;
&#xD;
ELSE&#xD;
	tartım_tamam:=FALSE;&#xD;
	motorlar:=FALSE;	&#xD;
END_IF;&#xD;
&#xD;
&#xD;
IF motorlar THEN&#xD;
	klepe:=TRUE;&#xD;
	ton_tim_1(In:=motorlar,PT:=T#800ms);&#xD;
	IF ton_tim_1.Q THEN&#xD;
		helezon:=TRUE;&#xD;
		vibrasyon:=TRUE;&#xD;
		sürücü:=TRUE;&#xD;
&#xD;
	END_IF;&#xD;
ELSE&#xD;
	helezon:=FALSE;&#xD;
	vibrasyon:=FALSE;&#xD;
	sürücü:=FALSE;&#xD;
	klepe:=FALSE;&#xD;
END_IF;</Text></StructuredTextModel>