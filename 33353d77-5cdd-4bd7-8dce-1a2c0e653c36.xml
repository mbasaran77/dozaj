<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>(*rise edge of recete hazırla*)&#xD;
my_r_trg(Clk:=reçete_hazırla, Q=&gt;recete_haz_rise);&#xD;
&#xD;
IF recete_haz_rise AND ilklendirme_bool=FALSE THEN&#xD;
	tank_seçim:=0;&#xD;
	ilklendirme_bool:=TRUE;&#xD;
END_IF;&#xD;
&#xD;
IF recete_iptal THEN&#xD;
	tank_seçim := 0;&#xD;
	ilklendirme_bool := FALSE;&#xD;
	tank1_çalış:=FALSE;&#xD;
	tank2_çalış:=FALSE;&#xD;
	tank3_çalış:=FALSE;&#xD;
	tank4_çalış:=FALSE;&#xD;
	recete_son := FALSE;&#xD;
	tartim_ok := FALSE ;&#xD;
END_IF;&#xD;
&#xD;
(*tank değiştirme*)&#xD;
IF reçete_hazırla=TRUE AND recete_son = FALSE AND tanklar_ok = FALSE THEN&#xD;
	&#xD;
	IF tank_değiştir=TRUE and tank_seçim&lt;3 THEN&#xD;
		tank_seçim:=tank_seçim+1;&#xD;
		tank_değiştir := FALSE ;&#xD;
		tank1_çalış := FALSE ;&#xD;
		tank2_çalış := FALSE ;&#xD;
		tank3_çalış := FALSE ;&#xD;
		tank4_çalış := FALSE ;&#xD;
	END_IF ;&#xD;
	&#xD;
	(*recete sıfırsa diğerine atlama*)&#xD;
	IF tank_seçim=0 THEN&#xD;
		IF b_recete_set[0]&lt;&gt;0.0 THEN&#xD;
			tank1_çalış:=TRUE;&#xD;
		ELSIF b_recete_set[0]=0.0 THEN&#xD;
			tank1_çalış:=false;&#xD;
			tank_seçim:=tank_seçim+1;&#xD;
		END_IF;&#xD;
	END_IF;&#xD;
	&#xD;
	IF tank_seçim=1 THEN&#xD;
		IF b_recete_set[1]&lt;&gt;0.0 THEN&#xD;
			tank2_çalış:=TRUE;&#xD;
		ELSIF b_recete_set[1]=0.0 THEN&#xD;
			tank2_çalış:=false;&#xD;
			tank_seçim:=tank_seçim+1;&#xD;
		END_IF;&#xD;
	END_IF;&#xD;
	&#xD;
	IF tank_seçim=2 THEN&#xD;
		IF b_recete_set[2]&lt;&gt;0.0 THEN&#xD;
			tank3_çalış:=TRUE;&#xD;
		ELSIF b_recete_set[2]=0.0 THEN&#xD;
			tank3_çalış:=false;&#xD;
			tank_seçim:=tank_seçim+1;&#xD;
		END_IF;&#xD;
	END_IF;&#xD;
	&#xD;
	IF tank_seçim=3 THEN&#xD;
		IF b_recete_set[3]&lt;&gt;0.0 THEN&#xD;
			tank4_çalış:=TRUE;&#xD;
		ELSIF b_recete_set[3]=0.0 THEN&#xD;
			tank4_çalış:=false;&#xD;
			ilklendirme_bool:=FALSE;&#xD;
			recete_son:=TRUE;&#xD;
		END_IF;&#xD;
	END_IF;&#xD;
	&#xD;
END_IF;&#xD;
//tank4 tartım bitince ya da tank4 set = 0 ise recete_son olsun&#xD;
IF tanklar_ok or recete_son THEN&#xD;
	recete_son:=TRUE;&#xD;
	ilklendirme_bool:=FALSE;&#xD;
	tank_seçim:=0;&#xD;
	tartim_ok := TRUE ;&#xD;
END_IF;&#xD;
&#xD;
&#xD;
IF arıza OR reçete_hazırla=FALSE OR tartim_ok THEN&#xD;
		tank1_çalış:=FALSE;&#xD;
		tank2_çalış:=FALSE;&#xD;
		tank3_çalış:=FALSE;&#xD;
		tank4_çalış:=FALSE;&#xD;
END_IF;&#xD;
&#xD;
my_tim_1(tartim_ok, T#1s, my_tim_1_Q, my_tim_1_ET);&#xD;
&#xD;
IF my_tim_1_Q THEN&#xD;
	recete_son := FALSE;&#xD;
	ilklendirme_bool := FALSE ;&#xD;
	tartim_ok := FALSE ;&#xD;
END_IF ;</Text></StructuredTextModel>